## 이번 장에서 배울 내용

- 객체를 만들어야 할 때와 만들지 말아야 할 때를 구분하는 법.
- 올바른 객체 생성 방법과 불필요한 생성을 피하는 방법.
- 제때 파괴됨을 보장하고 파괴 전에 수행해야 할 정리 작업을 관리하는 요령.


# Item 1 : 생성자 대신 정적(static) 팩터리 메서드를 고려하라.

---

클래스는 클라이언트에 public 생성자 대신 (혹은 생성자와 함께) 정적 팩터리 메서드를 제공할 수 있다.

## 장점.

### 1. 이름을 가질 수 있다.

생성자에 넘기는 매개변수와 생성자 자체만으로는 반한될 객체의 특성을 제대로 설명하지 못한다. 반면 정적 팩터리는 이름만
잘 지으면 반환될 객체의 특성을 쉽게 묘사할 수 있다. 그 예로 BigInteger.probablePrime 이 있다.

또, 생성자는 시그니처에 제약이 있다. 똑같은 타입을 파라미터로 받는 생성자 두개를 만들 수 없으니깐 그런 경우에도 public
static 팩토리 메소드를 사용하는 것이 유용하다.

### 2. 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다.

불변(immutable) 클래스는 인스턴스를 미리 만들어 놓거나 새로 생성한 인스턴스를 캐싱하여 재활용하는 식으로 불필요한 객체
생성을 피할 수 있다.

=> (특히 생성 비용이 큰)같은 객체가 자주 요청 되는 상황이라면 성능을 상당히 끌어올려 준다.

ex) 플라이웨이트 패턴

반복되는 요청에 같은 객체를 반환하는 식으로 정적 팩터리 방식의 클래스는 언제 어느 인스턴스를 살아 있게 할지를 철저히 통제할 수 있다.
이러한 클래스를 '인스턴스 통제 클래스' 라 한다.

인스턴스를 통제하는 이유는 무엇일까? 인스턴스를 통제하면 클래스를 싱글턴으로 만들 수도, 인스턴스화 불가로 만들수도 있다.
또한 불편 값 클래스에서 동치인 인스턴스가 단 하나뿐임을 보장할 수 있다(a == b 일때만 a.equals(b)가 성립)

### 3. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.

이 능력은 반환할 객체의 클래스를 자유롭게 선택할 수 있게 하는 엄청난 유연성을 선물한다.

리턴 타입은 인터페이스로 지정하고 그 인터페이스의 구현체는 API 로 노출 시키지 않지만 그 구현체의 인스턴스를 만들어 줄 수 있다는 말이다.
java.util.Collections 가 그 예에 해당한다.

### 4. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.

반환 타입의 하위 타입이기만 하면 어떤 클래스의 객체를 반환하든 상관없다.

### 5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.

## 단점

### 1. public 또는 protected 생성자 없이 static public 메소드만 제공하는 클래스는 상속할 수 없다.

### 2. 정적 팩터리 메서드는 프로그래머가 찾기 어렵다.

API 문서를 잘 써놓고 메서드 이름도 널리 알려진 규약을 따라 짓는 식으로 문제를 완화해줘야 한다.