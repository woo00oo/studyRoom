# item 2 : 생성자에 매개변수가 많다면 빌더를 고려하라

---

정적 팩터리와 생성자에는 똑같은 제약이 하나 있다. 선택적 매개변수가 많을 때 적절히 대응하기 어렵다는 점이다.

##해결책 1: 생성자

설정하고 싶은 매개변수를 최소한으로 사용하는 생성자를 사용해서 인스턴스를 만들 수 있다.

```java

NutritionFacts cocaCola = new NutritionFacts(240, 8, 100, 0, 35, 27);

```

매개변수가 많아지면 클라이언트 코드를 작성하거나 읽기 어렵다.

코드를 읽을 때 각 값의 의미가 무엇인지 헷갈릴 것이고, 매개변수가 몇 개인지도 주의해서 세어 보아야 할 것이다.
타입이 같은 매개변수가 연달아 늘어서 있으면 찾기 어려운 버그로 이어질 수 있다.
클라이언트가 실수로 매개변수의 순서를 바꿔 건네줘도 컴파일러는 알아채지 못하고, 결국 런타임에 엉뚱한 동작을 하게 된다.

##해결책 2: 자바빈즈

매개변수가 없는 생성자로 객체를 만든 후, 세터(setter)메서드들을 호출해 원하는 매개변수의 값을 설정하는 방식.

```java

NutritionFacts cocaCola = new NutritionFacts();
cocaCola.setServingSize(240);
cocaCola.setServings(8);
cocaCola.setCalories(100);
...

```

자바빈즈의 단점으로는 객체 하나를 만드려면 메서드를 여러 개 호출해야 하고, 객체가 완전히 생성되기 전까지는 일관성(consistency)이 무너진 상태에 놓이게 된다.

또한(게터와 세터가 있어서)불변 클래스로 만들지 못한다는 단점이 있고(쓰레드 간에 공유 가능한 상태가 있으니깐)쓰레드 안정성을 보장하려면 추가적인 수고(locking 같은)가 필요하다

##해결책 3: 빌더 패턴

생성자의 안정성과 자바빈을 사용할때 얻을 수 있었던 가독성을 모두 취할 수 있는 대안.

빌더 패턴은 만들려는 객체를 바로 만들지 않고 클라이언트는 빌더(생성자 또는 static 팩토리)에 필수적인 매개변수를 주면서 호출해 
Builder 객체를 얻은 다음 빌더 객체가 제공하는 세터와 비슷한 메소드를 사용해서 부가적인 필드를 채워넣고 최종적으로 build라는 메소드를 호출해서 만들려는 객체를 생성한다.

```java

NutritionFacts cocaCola = new NutritionFacts.Builder(240, 8)
.calories(100).sodium(35).carbohydrate(27).build();

```
